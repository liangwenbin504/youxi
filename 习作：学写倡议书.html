<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€¡è®®ä¹¦å†™ä½œé—¯å…³æ¸¸æˆ</title>
    <style>
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: "Microsoft YaHei", sans-serif;
        }
        .level {
            display: none;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #f9f9f9;
            margin-bottom: 20px;
        }
        .level.active {
            display: block;
        }
        .question {
            font-size: 18px;
            margin-bottom: 15px;
            color: #333;
        }
        .options {
            margin-bottom: 20px;
        }
        .option {
            display: block;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .option:hover {
            background-color: #e6f7ff;
        }
        .option.selected {
            background-color: #b3e0ff;
            border-color: #409eff;
        }
        .btn {
            padding: 10px 20px;
            background-color: #409eff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px 0;
        }
        .btn:hover {
            background-color: #1890ff;
        }
        .level-nav {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .nav-btn {
            padding: 8px 15px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .nav-btn.active {
            background-color: #409eff;
            color: white;
        }
        .original-text {
            background-color: #fff8e1;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 16px;
            color: #666;
        }
        #success {
            display: none;
            text-align: center;
            padding: 50px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #f9f9f9;
        }
        .score-box {
            font-size: 24px;
            color: #e6a23c;
            margin: 20px 0;
            font-weight: bold;
        }
        .comment-box {
            font-size: 24px; /* å­—ä½“æ”¾å¤§ */
            color: red; /* å­—ä½“çº¢è‰² */
            margin: 20px 0;
            padding: 15px;
            background-color: #fff8e1;
            border-radius: 4px;
            font-weight: bold; /* åŠ ç²—æ›´é†’ç›® */
        }
        /* é”™é¢˜åˆ†ææ ·å¼ */
        .error-analysis {
            margin: 20px 0;
            padding: 20px;
            background-color: #ffebee;
            border-radius: 4px;
            border: 1px solid #ffcdd2;
            text-align: left;
        }
        .error-analysis h3 {
            color: #c62828;
            margin-top: 0;
            text-align: center;
        }
        .error-item {
            margin: 15px 0;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ffcdd2;
        }
        .error-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        .error-question {
            font-weight: bold;
            color: #333;
        }
        .error-user, .error-correct {
            margin: 5px 0;
        }
        .error-correct span {
            color: #2e7d32;
            font-weight: bold;
        }
    </style>
    <style>
        /* è¿”å›æŒ‰é’®æ ·å¼ */
        .back-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 24px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            z-index: 1000;
            display: none;
        }
        .back-button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }
        .back-button:active {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>å€¡è®®ä¹¦å†™ä½œé—¯å…³æ¸¸æˆ</h1>
        <!-- å…³å¡å¯¼èˆª -->
        <div class="level-nav">
            <button class="nav-btn active" data-level="1">å…³å¡1ï¼šå®¡é¢˜è®­ç»ƒ</button>
            <button class="nav-btn" data-level="2">å…³å¡2ï¼šé€‰æè®­ç»ƒ</button>
            <button class="nav-btn" data-level="3">å…³å¡3ï¼šæ„æ€è®­ç»ƒ</button>
            <button class="nav-btn" data-level="4">å…³å¡4ï¼šå†™æ³•è®­ç»ƒ</button>
        </div>

        <!-- å…³å¡1ï¼šå®¡é¢˜è®­ç»ƒ -->
        <div class="level active" id="level1">
            <h2>å…³å¡1ï¼šå®¡é¢˜è®­ç»ƒ</h2>
            <div class="original-text">
                åŸæ–‡ï¼š1. å®¡é¢˜è®­ç»ƒï¼šå¡«ä¸€å¡«ï¼Œé€‰ä¸€é€‰ï¼Œæ˜ç¡®æœ¬æ¬¡ä¹ ä½œçš„ä»»åŠ¡ã€‚<br>
                (1) å®¡æ¸…ä½“è£ï¼šæœ¬æ¬¡ä¹ ä½œå±äºï¼ˆè®°å™æ–‡ åº”ç”¨æ–‡ è¯´æ˜æ–‡ï¼‰ã€‚<br>
                (2) å®¡æ¸…å†…å®¹ï¼šâ€œå€¡è®®â€äºŒå­—çš„æ„æ€æ˜¯ï¼ˆï¼‰ã€‚<br>
                A. å‘åˆ«äººå¤šæ¬¡æå‡ºæ„è§ B. å‘åˆ«äººé¦–å…ˆæå‡ºå»ºè®® C. å‘½ä»¤åˆ«äººåšæŸäº‹
            </div>
            <!-- é¢˜ç›®1ï¼šå®¡é¢˜ä½“è£ -->
            <div class="question-item">
                <div class="question">1. æœ¬æ¬¡å€¡è®®ä¹¦ä¹ ä½œå±äºå“ªä¸€ç±»ä½“è£ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="1">A. è®°å™æ–‡</div>
                    <div class="option" data-answer="2" data-correct="true">B. åº”ç”¨æ–‡</div>
                    <div class="option" data-answer="3">C. è¯´æ˜æ–‡</div>
                    <div class="option" data-answer="4">D. è®®è®ºæ–‡</div>
                </div>
            </div>
            <!-- é¢˜ç›®2ï¼šå€¡è®®å«ä¹‰ -->
            <div class="question-item">
                <div class="question">2. â€œå€¡è®®â€äºŒå­—çš„æ­£ç¡®æ„æ€æ˜¯ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="1">A. å‘åˆ«äººå¤šæ¬¡æå‡ºæ„è§</div>
                    <div class="option" data-answer="2" data-correct="true">B. å‘åˆ«äººé¦–å…ˆæå‡ºå»ºè®®</div>
                    <div class="option" data-answer="3">C. å‘½ä»¤åˆ«äººåšæŸäº‹</div>
                    <div class="option" data-answer="4">D. æ¥å—åˆ«äººçš„æ„è§</div>
                </div>
            </div>
            <button class="btn next-btn" data-next="2">ä¸‹ä¸€æ­¥</button>
        </div>

        <!-- å…³å¡2ï¼šé€‰æè®­ç»ƒ -->
        <div class="level" id="level2">
            <h2>å…³å¡2ï¼šé€‰æè®­ç»ƒ</h2>
            <div class="original-text">
                åŸæ–‡ï¼š2. é€‰æè®­ç»ƒï¼šä¸‹åˆ—ææ–™ä¸­ï¼Œå“ªäº›å¯ä»¥ä½œä¸ºå€¡è®®ä¹¦çš„å†…å®¹ï¼Ÿæ‰“â€œâˆšâ€ã€‚<br>
                (1) å¤§å®¶è‡ªè§‰åšå¥½åƒåœ¾åˆ†ç±»ã€‚ï¼ˆï¼‰(2) åœ¨å®¶é‡Œä¸»åŠ¨åšåŠ›æ‰€èƒ½åŠçš„å®¶åŠ¡ã€‚ï¼ˆï¼‰<br>
                (3) å¦ˆå¦ˆä¸çœ ä¸ä¼‘ç…§é¡¾ç”Ÿç—…çš„æˆ‘ã€‚ï¼ˆï¼‰(4) ç§¯æå‚åŠ ç¤¾åŒºæ‰“æ‰«å«ç”Ÿçš„æ´»åŠ¨ã€‚ï¼ˆï¼‰
            </div>
            <!-- é¢˜ç›®3ï¼šé€‰æåˆ¤æ–­ï¼ˆå¤šé€‰ï¼‰ -->
            <div class="question-item">
                <div class="question">ä¸‹åˆ—å“ªäº›ææ–™é€‚åˆä½œä¸ºå€¡è®®ä¹¦çš„å†…å®¹ï¼Ÿï¼ˆå¯å¤šé€‰ï¼‰</div>
                <div class="options">
                    <div class="option" data-answer="1" data-correct="true">A. å¤§å®¶è‡ªè§‰åšå¥½åƒåœ¾åˆ†ç±»</div>
                    <div class="option" data-answer="2" data-correct="true">B. åœ¨å®¶é‡Œä¸»åŠ¨åšåŠ›æ‰€èƒ½åŠçš„å®¶åŠ¡</div>
                    <div class="option" data-answer="3">C. å¦ˆå¦ˆä¸çœ ä¸ä¼‘ç…§é¡¾ç”Ÿç—…çš„æˆ‘</div>
                    <div class="option" data-answer="4" data-correct="true">D. ç§¯æå‚åŠ ç¤¾åŒºæ‰“æ‰«å«ç”Ÿçš„æ´»åŠ¨</div>
                    <div class="option" data-answer="5">E. è¦æ±‚åŒå­¦å¿…é¡»æ¯å¤©é˜…è¯»1å°æ—¶</div>
                </div>
            </div>
            <button class="btn next-btn" data-next="3">ä¸‹ä¸€æ­¥</button>
        </div>

        <!-- å…³å¡3ï¼šæ„æ€è®­ç»ƒ -->
        <div class="level" id="level3">
            <h2>å…³å¡3ï¼šæ„æ€è®­ç»ƒ</h2>
            <div class="original-text">
                åŸæ–‡ï¼š3. æ„æ€è®­ç»ƒï¼šä¸‹é¢æ˜¯å€¡è®®ä¹¦çš„æ ¼å¼ï¼Œæ ¹æ®è‡ªå·±çš„æ„æ€ï¼ŒæŠŠå†…å®¹è¡¥å……å®Œæ•´ã€‚<br>
                â€œå€¡è®®ä¹¦æ ‡é¢˜<br>
                ç§°å‘¼<br>
                åˆ†æ¡å†™æ¸…æ¥šå€¡è®®çš„å†…å®¹<br>
                æœ€åç½²åï¼Œå¹¶å†™ä¸Šæ—¥æœŸ
            </div>
            <!-- é¢˜ç›®4ï¼šæ ¼å¼é¡ºåº -->
            <div class="question-item">
                <div class="question">å€¡è®®ä¹¦çš„æ­£ç¡®æ ¼å¼é¡ºåºæ˜¯ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="1">A. ç§°å‘¼ â†’ å€¡è®®ä¹¦æ ‡é¢˜ â†’ å€¡è®®å†…å®¹ â†’ ç½²å+æ—¥æœŸ</div>
                    <div class="option" data-answer="2" data-correct="true">B. å€¡è®®ä¹¦æ ‡é¢˜ â†’ ç§°å‘¼ â†’ å€¡è®®å†…å®¹ â†’ ç½²å+æ—¥æœŸ</div>
                    <div class="option" data-answer="3">C. å€¡è®®å†…å®¹ â†’ å€¡è®®ä¹¦æ ‡é¢˜ â†’ ç§°å‘¼ â†’ ç½²å+æ—¥æœŸ</div>
                    <div class="option" data-answer="4">D. å€¡è®®ä¹¦æ ‡é¢˜ â†’ å€¡è®®å†…å®¹ â†’ ç§°å‘¼ â†’ ç½²å+æ—¥æœŸ</div>
                </div>
            </div>
            <button class="btn next-btn" data-next="4">ä¸‹ä¸€æ­¥</button>
        </div>

        <!-- å…³å¡4ï¼šå†™æ³•è®­ç»ƒ -->
        <div class="level" id="level4">
            <h2>å…³å¡4ï¼šå†™æ³•è®­ç»ƒ</h2>
            <div class="original-text">
                åŸæ–‡ï¼š4. å†™æ³•è®­ç»ƒï¼šæ­£æ–‡æ˜¯å€¡è®®ä¹¦ä¸­æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œæ ¹æ®è¦æ±‚å®Œæˆç»ƒä¹ ã€‚<br>
                (1) å†™æ¸…ç°çŠ¶åŠé—®é¢˜æ‰€åœ¨ï¼Œæ˜ç¡®å€¡è®®çš„é‡è¦æ€§ã€‚<br>
                åœ°çƒæ˜¯äººç±»èµ–ä»¥ç”Ÿå­˜çš„å®¶å›­ï¼Œç”Ÿæ€ç¯å¢ƒæ˜¯äººç±»å‘å±•çš„åŸºç¡€ã€‚éšç€å…¨çƒç»æµç°ä»£åŒ–ç¨‹åº¦çš„åŠ æ·±å’Œå·¥ä¸šæ–‡æ˜çš„ä¸æ–­æ¨è¿›ï¼Œç¯å¢ƒé—®é¢˜ä¹Ÿè¶Šæ¥è¶Šä¸¥é‡ï¼Œå„ç§èƒ½è€—å’Œæ±¡æŸ“ç‰©æ’æ”¾æ—¥ç›Šå±åŠåœ°çƒç”Ÿæ€å¹³è¡¡å’Œäººç±»ç”Ÿå­˜çš„æ ¹åŸºã€‚ä¸ºäº†ä¿æŠ¤æˆ‘ä»¬å…±åŒçš„å®¶å›­ï¼Œå…­å¹´çº§ï¼ˆ2ï¼‰ç­å‘å…¨ä½“å¸ˆç”ŸåŠå®¶é•¿å‘å‡ºå€¡è®®ã€‚<br>
                ç”±ä»¥ä¸Šæ–‡å­—å¯ä»¥çœ‹å‡ºï¼Œæå‡ºå€¡è®®çš„åŸå› æ˜¯ï¼š<br>
                (2) ç»“å°¾å†™ä¸€äº›å‘¼åæ€§çš„è¯­è¨€ã€‚<br>
                â€œå€¡å¯¼ç»¿è‰²ç”Ÿæ´»ï¼Œæ„ç­‘ä½ç¢³æœªæ¥â€æ˜¯æ”¹å–„ç”Ÿæ´»ç¯å¢ƒã€é€ ç¦å­å­™åä»£çš„ä¸€é¡¹é•¿ä¹…è€Œè‰°å·¨çš„ä»»åŠ¡ã€‚è¿‡å»ï¼Œæˆ‘ä»¬ä¸ºæ­¤ä½œå‡ºäº†ä¸æ‡ˆçš„åŠªåŠ›ã€‚ä»Šå¤©ï¼Œè®©æˆ‘ä»¬å†æ¬¡æºèµ·æ‰‹æ¥ï¼Œä¸ºäº†åœ°çƒçš„æœªæ¥ï¼Œç†„ç¯ä¸€å°æ—¶ï¼Œå‡å°‘ç¢³æ’æ”¾ã€‚ä»ä¸€ç‚¹ä¸€æ»´åšèµ·ï¼Œè®©æˆ‘ä»¬ç”Ÿå­˜çš„ç¯å¢ƒæ›´åŠ ç¾å¥½ï¼<br>
                â‘  è¯»äº†è¿™æ®µæ–‡å­—ï¼Œæˆ‘èƒ½å¤Ÿæ„Ÿå—åˆ°å€¡è®®çš„æ„ŸæŸ“åŠ›å’Œï¼ˆï¼‰<br>
                â‘¡ è¡¥å…¨ä¸‹é¢å…³äºè¯»ä¹¦çš„å€¡è®®ä¹¦çš„ç»“å°¾ã€‚<br>
                â€œè…¹æœ‰è¯—ä¹¦æ°”è‡ªåã€‚â€åŒå­¦ä»¬ï¼Œè¯»ä¹¦æœ‰ç›Šï¼Œç›Šå·±ï¼Œç›Šäººï¼Œç›Šæ°‘æ—ã€‚è¯»ä¹¦æ˜¯ä¸€ç§ç²¾ç¥ï¼Œä¸€ç§åŠ›é‡ï¼›æ›´æ˜¯ä¸€ç§è´£ä»»ï¼Œä¸€ç§ä½¿å‘½ã€‚è¯»ä¹¦ä¿ƒå­¦ä¹ ï¼Œä¿ƒåˆ›æ–°ï¼Œä¿ƒå’Œè°ï¼Œä¿ƒå‘å±•ã€‚è®©æˆ‘ä»¬ç«‹å³è¡ŒåŠ¨èµ·æ¥ï¼Œï¼ˆï¼‰
            </div>
            <!-- é¢˜ç›®5ï¼šç¯ä¿å€¡è®®åŸå›  -->
            <div class="question-item">
                <div class="question">1. æ–‡ä¸­æå‡ºç¯ä¿å€¡è®®çš„ä¸»è¦åŸå› æ˜¯ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="1">A. åœ°çƒé£æ™¯ä¼˜ç¾ï¼Œéœ€è¦å¤§å®¶æ¬£èµ</div>
                    <div class="option" data-answer="2" data-correct="true">B. ç¯å¢ƒé—®é¢˜ä¸¥é‡ï¼Œå±åŠç”Ÿæ€å¹³è¡¡å’Œäººç±»ç”Ÿå­˜</div>
                    <div class="option" data-answer="3">C. å…­å¹´çº§ï¼ˆ2ï¼‰ç­æƒ³è¦ç»„ç»‡æ´»åŠ¨</div>
                    <div class="option" data-answer="4">D. å·¥ä¸šæ–‡æ˜æ¨è¿›éœ€è¦æ›´å¤šèƒ½æº</div>
                </div>
            </div>
            <!-- é¢˜ç›®6ï¼šç»“å°¾ç‰¹ç‚¹åˆ¤æ–­ -->
            <div class="question-item">
                <div class="question">2. ç¯ä¿å€¡è®®ç»“å°¾æ–‡å­—ä½“ç°çš„ç‰¹ç‚¹ä¸åŒ…æ‹¬ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="1">A. æ„ŸæŸ“åŠ›</div>
                    <div class="option" data-answer="2">B. å·å¬åŠ›</div>
                    <div class="option" data-answer="3" data-correct="true">C. å¼ºåˆ¶æ€§</div>
                    <div class="option" data-answer="4">D. å‰ç»æ€§</div>
                </div>
            </div>
            <!-- é¢˜ç›®7ï¼šè¯»ä¹¦å€¡è®®ç»“å°¾ -->
            <div class="question-item">
                <div class="question">3. ä¸‹åˆ—å“ªé¡¹é€‚åˆä½œä¸ºè¯»ä¹¦å€¡è®®ä¹¦çš„ç»“å°¾ï¼Ÿ</div>
                <div class="options">
                    <div class="option" data-answer="1">A. æ¯å¤©å¿…é¡»è¯»å¤Ÿ2å°æ—¶ï¼Œå¦åˆ™ä¼šå—æƒ©ç½š</div>
                    <div class="option" data-answer="2" data-correct="true">B. è®©è¯»ä¹¦æˆä¸ºä¹ æƒ¯ï¼Œè®©ä¹¦é¦™æµ¸æ¶¦å¿ƒçµ</div>
                    <div class="option" data-answer="3">C. è¯»ä¹¦æ˜¯ä¸ªäººçš„äº‹ï¼Œä¸ç”¨å’Œåˆ«äººåˆ†äº«</div>
                    <div class="option" data-answer="4">D. åªéœ€è¦è¯»è¯¾æœ¬ï¼Œä¸ç”¨è¯»è¯¾å¤–ä¹¦</div>
                </div>
            </div>
            <button class="btn finish-btn">å®Œæˆé—¯å…³</button>
        </div>

        <!-- é—¯å…³æˆåŠŸæç¤ºï¼ˆæ–°å¢å¾—åˆ†ã€çº¢è‰²æ”¾å¤§è¯„ä»·ã€é”™é¢˜åˆ†æã€å†æ¬¡é—¯å…³ï¼‰ -->
        <div id="success">
            <h2>ğŸ‰ å€¡è®®ä¹¦å†™ä½œé—¯å…³æˆåŠŸï¼</h2>
            <div class="score-box" id="score-display">æœ€ç»ˆå¾—åˆ†ï¼š0/70</div>
            <div class="comment-box" id="comment-display">ä½ çš„è¯„ä»·æ­£åœ¨åŠ è½½ä¸­...</div>
            <!-- é”™é¢˜åˆ†æåŒºåŸŸ -->
            <div class="error-analysis" id="error-analysis"></div>
            <button class="btn" id="restart-btn">å†æ¬¡é—¯å…³</button>
        </div>
    </div>

    <script>
        // é€‰é¡¹é€‰æ‹©åŠŸèƒ½
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function() {
                const parentOptions = this.parentElement;
                const level = this.closest('.level').id;
                // å…³å¡2ä¸ºå¤šé€‰ï¼Œå…¶ä»–ä¸ºå•é€‰
                if (level !== 'level2') {
                    parentOptions.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                }
                this.classList.toggle('selected');
            });
        });

        // å…³å¡å¯¼èˆªåˆ‡æ¢
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const levelNum = this.getAttribute('data-level');
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                document.querySelectorAll('.level').forEach(level => level.classList.remove('active'));
                document.getElementById('level' + levelNum).classList.add('active');
            });
        });

        // ä¸‹ä¸€æ­¥æŒ‰é’®åŠŸèƒ½
        document.querySelectorAll('.next-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const nextLevel = this.getAttribute('data-next');
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                document.querySelector(`.nav-btn[data-level="${nextLevel}"]`).classList.add('active');
                document.querySelectorAll('.level').forEach(level => level.classList.remove('active'));
                document.getElementById('level' + nextLevel).classList.add('active');
            });
        });

        // è®¡ç®—å¾—åˆ†å¹¶æ”¶é›†é”™é¢˜ä¿¡æ¯ï¼ˆæ¯é¢˜10åˆ†ï¼Œå…±7é¢˜ï¼‰
        function calculateScoreAndErrors() {
            let correctCount = 0;
            const errors = []; // å­˜å‚¨é”™é¢˜ä¿¡æ¯ï¼š[{question: '', userAnswer: '', correctAnswer: ''}]
            const questionItems = document.querySelectorAll('.question-item');
            
            questionItems.forEach((item, index) => {
                const questionText = item.querySelector('.question').textContent;
                const options = item.querySelectorAll('.option');
                const correctOptions = item.querySelectorAll('.option[data-correct="true"]');
                const selectedOptions = item.querySelectorAll('.option.selected');

                // æ”¶é›†ç”¨æˆ·é€‰æ‹©çš„ç­”æ¡ˆæ–‡æœ¬
                const userAnswerText = Array.from(selectedOptions).map(opt => opt.textContent).join('ã€') || 'æœªé€‰æ‹©';
                // æ”¶é›†æ­£ç¡®ç­”æ¡ˆæ–‡æœ¬
                const correctAnswerText = Array.from(correctOptions).map(opt => opt.textContent).join('ã€');

                // å•é€‰é€»è¾‘ï¼šé€‰ä¸­ä¸”æ˜¯æ­£ç¡®é€‰é¡¹
                let isCorrect = false;
                if (correctOptions.length === 1) {
                    isCorrect = selectedOptions.length === 1 && selectedOptions[0].hasAttribute('data-correct');
                }
                // å¤šé€‰é€»è¾‘ï¼šé€‰ä¸­çš„æ­£ç¡®é€‰é¡¹æ•°é‡ = æ€»æ­£ç¡®é€‰é¡¹æ•°é‡ï¼Œä¸”æœªé€‰é”™è¯¯é€‰é¡¹
                else {
                    const selectedCorrect = Array.from(selectedOptions).filter(opt => opt.hasAttribute('data-correct'));
                    isCorrect = selectedCorrect.length === correctOptions.length && selectedOptions.length === correctOptions.length;
                }

                if (isCorrect) {
                    correctCount++;
                } else {
                    errors.push({
                        question: questionText,
                        userAnswer: userAnswerText,
                        correctAnswer: correctAnswerText
                    });
                }
            });

            return {
                score: correctCount * 10,
                errors: errors
            };
        }

        // æç¬‘è¯„ä»·å‡½æ•°ï¼ˆæŒ‰åˆ†æ•°æ®µåŒ¹é…ï¼‰
        function getFunnyComment(score) {
            if (score === 70) return 'å¤©é€‰å†™æ‰‹ï¼å€¡è®®ä¹¦å¤§å¸ˆéä½ è«å±ï¼Œç›´æ¥å¯ä»¥å¼€ç­æˆè¯¾äº†ï½';
            if (score >= 50) return 'ç‰›å“‡ï¼åªå·®ä¸€ç‚¹ç‚¹å°±æ»¡åˆ†ï¼Œä½ å°±æ˜¯è¢«å­¦ä¹ è€½è¯¯çš„å€¡è®®å°èƒ½æ‰‹ï¼';
            if (score >= 30) return 'è¿˜ä¸é”™å“¦ï½å†åŠªåŠªåŠ›ï¼Œå€¡è®®ä¹¦å†™ä½œå°è¾¾äººå°±æ˜¯ä½ ï¼';
            if (score >= 10) return 'åŠ æ²¹ï¼çœ‹æ¥ä½ å¯¹å€¡è®®ä¹¦çš„äº†è§£è¿˜åœç•™åœ¨â€œé¢ç†Ÿâ€é˜¶æ®µï¼Œå†é—¯ä¸€æ¬¡è¯•è¯•ï½';
            return 'å“ˆå“ˆå“ˆå“ˆé‡æ–°æ¥è¿‡ï¼å»ºè®®å…ˆæŠŠå€¡è®®ä¹¦åŸæ–‡æŠ„ä¸‰éï¼Œä¸‹æ¬¡è‚¯å®šèƒ½è¿›æ­¥ï½';
        }

        // æ¸²æŸ“é”™é¢˜åˆ†æ
        function renderErrorAnalysis(errors) {
            const errorContainer = document.getElementById('error-analysis');
            if (errors.length === 0) {
                errorContainer.innerHTML = '<h3>æœ¬æ¬¡é—¯å…³æ— é”™é¢˜ï¼Œå¤ªå‰å®³å•¦ï¼</h3>';
                return;
            }

            let errorHtml = '<h3>é”™é¢˜åˆ†æ</h3>';
            errors.forEach((err, idx) => {
                errorHtml += `
                    <div class="error-item">
                        <div class="error-question">${idx + 1}. ${err.question}</div>
                        <div class="error-user">ä½ çš„ç­”æ¡ˆï¼š${err.userAnswer}</div>
                        <div class="error-correct">æ­£ç¡®ç­”æ¡ˆï¼š<span>${err.correctAnswer}</span></div>
                    </div>
                `;
            });
            errorContainer.innerHTML = errorHtml;
        }

        // é‡ç½®æ¸¸æˆå‡½æ•°ï¼ˆä¿®å¤æ ¸å¿ƒé€»è¾‘ï¼šé€šè¿‡activeç±»æ§åˆ¶æ˜¾ç¤ºï¼Œè€Œéç›´æ¥ä¿®æ”¹displayï¼‰
        function resetGame() {
            // 1. éšè—æˆåŠŸæç¤ºåŒºåŸŸ
            document.getElementById('success').style.display = 'none';
            // 2. æ˜¾ç¤ºå…³å¡å¯¼èˆªæ ï¼ˆæ¢å¤é»˜è®¤æ ·å¼ï¼‰
            document.querySelector('.level-nav').style.display = 'flex';
            // 3. é‡ç½®æ‰€æœ‰é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            // 4. é‡ç½®å…³å¡å¯¼èˆªçš„activeç±»ï¼Œé»˜è®¤é€‰ä¸­å…³å¡1
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.querySelector('.nav-btn[data-level="1"]').classList.add('active');
            // 5. é‡ç½®å…³å¡çš„activeç±»ï¼Œé»˜è®¤æ˜¾ç¤ºå…³å¡1
            document.querySelectorAll('.level').forEach(level => level.classList.remove('active'));
            document.getElementById('level1').classList.add('active');
        }

        // å®Œæˆé—¯å…³æŒ‰é’®åŠŸèƒ½
        document.querySelector('.finish-btn').addEventListener('click', function() {
            const result = calculateScoreAndErrors();
            const totalScore = result.score;
            const errors = result.errors;
            const comment = getFunnyComment(totalScore);
            
            // æ˜¾ç¤ºå¾—åˆ†å’Œçº¢è‰²æ”¾å¤§è¯„ä»·
            document.getElementById('score-display').textContent = `æœ€ç»ˆå¾—åˆ†ï¼š${totalScore}/70`;
            document.getElementById('comment-display').textContent = comment;
            // æ¸²æŸ“é”™é¢˜åˆ†æ
            renderErrorAnalysis(errors);

            // éšè—å…³å¡å¯¼èˆªå’Œæ‰€æœ‰å…³å¡ï¼Œæ˜¾ç¤ºæˆåŠŸæç¤º
            document.querySelector('.level-nav').style.display = 'none';
            document.querySelectorAll('.level').forEach(level => level.classList.remove('active'));
            document.getElementById('success').style.display = 'block';
            
            // æ˜¾ç¤ºè¿”å›æŒ‰é’®
            document.getElementById('back-btn').style.display = 'block';
        });

        // å†æ¬¡é—¯å…³æŒ‰é’®åŠŸèƒ½
        document.getElementById('restart-btn').addEventListener('click', resetGame);
    </script>
<!-- è¿”å›æŒ‰é’® -->
    <button id="back-btn" class="back-button">è¿”å›ä¸»ç•Œé¢</button>
    <script>
        // è¿”å›æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('back-btn').addEventListener('click', function() {
            window.location.href = 'index.html';
        });
    </script>
    </body>
</html>
